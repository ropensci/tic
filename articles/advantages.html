<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The advantages of tic • tic</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<link href="../ropensci.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The advantages of tic">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tic</a>
        <div class="info">
          <span class="partof">part of  <a href="https://ropensci.org"><img src="https://d33wubrfki0l68.cloudfront.net/88338b7637e084df5c43e7a9e6293719dbaf10e2/30903/img/icon_lettering_white.svg" height="24" alt="rOpenSci"></a></span>
          <span class="version label label-default version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.13.9013</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/advantages.html">Why you should use tic</a>
    </li>
    <li>
      <a href="../articles/build-lifecycle.html">The CI build lifecycle</a>
    </li>
    <li>
      <a href="../articles/tic-usethis-travis.html">tic, travis and usethis</a>
    </li>
    <li>
      <a href="../articles/advanced.html">Advanced usage</a>
    </li>
    <li>
      <a href="../articles/deployment.html">Deployment</a>
    </li>
    <li>
      <a href="../articles/custom-steps.html">Custom steps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropenscilabs/tic">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>The advantages of tic</h1>
                        <h4 class="author">Patrick Schratz, Kirill Müller</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropenscilabs/tic/blob/master/vignettes/advantages.Rmd"><code>vignettes/advantages.Rmd</code></a></small>
      <div class="hidden name"><code>advantages.Rmd</code></div>

    </div>

    
    
<p>So, what’s the advantage of using <em>tic</em> over the standard CI process?</p>
<ol style="list-style-type: decimal">
<li><p>Deployment to a Git repository is greatly simplified. Update your repository with results from the CI build.</p></li>
<li><p>Support for R packages and other kinds of project (bookdown, blogdown, etc.), with predefined templates. Set up your project to deploy rendered versions of your book or blog with a single push to Git.</p></li>
<li><p>Workflow specification in a single <code>.R</code> file, regardless of CI system used.<br>
Forget about <code>.yml</code> files or web browser configurations.</p></li>
</ol>
<p>Other minor advantages include the use of <code><a href="https://www.rdocumentation.org/packages/rcmdcheck/topics/rcmdcheck">rcmdcheck::rcmdcheck()</a></code> for package checking a and robust caching approach of dependencies.</p>
<div id="easier-deployment" class="section level2">
<h2 class="hasAnchor">
<a href="#easier-deployment" class="anchor"></a>Easier deployment</h2>
<p>CI services can be used to automatically build and deploy files. This means that these services can push certain files created during the build to repositories (GitHub, GitLab, etc.). Use cases can be</p>
<ul>
<li>changed site contents of <em>pkgdown</em> site</li>
<li>updated .Rd files of a package (by calling <code><a href="https://www.rdocumentation.org/packages/devtools/topics/document">devtools::document()</a></code> before)</li>
<li>an automatic generated <a href="https://github.com/yonicd/covrpage">test summary page</a> of a package</li>
</ul>
<p>When the goal is to use CI services for deployment, some preparatory work needs to be done. <em>tic</em> takes care of all of this (setting up SSH keys, granting permission for the repo on GitHub and the CI services, creation of a personal Personal Access Token (PAT)). When using <code>travis::use_ci()</code> the whole preparation process is streamlined and only needs to be called once for every repo.</p>
<p>For more information on automatic deployment in <em>tic</em>, take a look <a href="deployment.html">here</a>.</p>
</div>
<div id="support-for-various-r-projects" class="section level2">
<h2 class="hasAnchor">
<a href="#support-for-various-r-projects" class="anchor"></a>Support for various R projects</h2>
<p><em>tic</em> was developed with the aim to not only simplify R package development using CI services but also to support other R project types (bookdown, blogdown, drat, website and figshare deployment).</p>
<p>Each of these projects has its own standardized structure. <em>tic</em> detects this structure and adds templates tailored towards this specific project type to the repository when calling <code>usethis::use_ci()</code>. See <a href="tic.html#example-projects">here</a> for a list of supported project types including links to minimal example repositories.</p>
</div>
<div id="ci-agnostic-workflows" class="section level2">
<h2 class="hasAnchor">
<a href="#ci-agnostic-workflows" class="anchor"></a>CI-Agnostic workflows</h2>
<p>What does “CI-Agnostic” mean and why do we need it?</p>
<p>You may have heard that multiple CI services exist in the wild. Some only support specific operating systems or certain languages and for some you need to pay a monthly fee to use them. Each system has its own way to specify the setup. Often it is a YAML file stored at the top-level directory of your repo. This setup file controls what will be done in each run.</p>
<p>To give you an example how different these control files can be, take a look at these two examples from <a href="https://github.com/tidyverse/dplyr/blob/master/.travis.yml">Travis</a> and <a href="https://github.com/tidyverse/dplyr/blob/master/appveyor.yml">Appveyor</a>. While Travis is the only free CI service with an “official” support for R (maintained by the community, specifically by <span class="citation">@jimhester</span>), <code>Appveyor</code> currently requires quite some magic (e.g. <code>travis-tool.sh</code>) in the background to install a working R framework.</p>
<p>We could list way more differences - but that’s exactly the point when <em>tic</em> comes in!</p>
<ul>
<li>Rather than dealing with all the CI differences, <em>tic</em> enables the specification of the complete workflow in an external R script file <code>tic.R</code>.</li>
<li>The commands specified in there will work the same way on every CI service that is supported by <em>tic</em>.</li>
<li>Furthermore, you can <a href="advantages.html#less-dependency-on-external-ci-control-commands">emulate all the stages and steps locally</a> by calling <code><a href="../reference/run_all_stages.html">run_all_stages()</a></code>.</li>
<li>You are independent from all the changes that are being made to the R setup for Travis or Appveyor (<a href="advantages.html#less-dependency-on-external-ci-control-commands">more info</a>).</li>
<li>A <code>tic.R</code> workflow is usually shorter and easier to parse than a <code>.travis.yml</code> or <code>appveyor.yml</code> file.</li>
</ul>
<p>So instead of learning how to specify specific tasks on different CI platforms, you only need to learn how to do with R commands.</p>
</div>
<div id="less-dependency-on-external-ci-control-commands" class="section level2">
<h2 class="hasAnchor">
<a href="#less-dependency-on-external-ci-control-commands" class="anchor"></a>Less dependency on external CI control commands</h2>
<p>Most CI services come with no (native) support for the R programming language. For Travis and Appveyor, the support is provided by the R community. For example, <a href="https://github.com/travis-ci/travis-build/blob/master/lib/travis/build/script/r.rb">r.rb</a> controls what happens if you set <code>language: r</code> on Travis. All of the commands and arguments specified there can also be set in <code>tic.R</code> using R syntax. So you are no longer dependent on the syntax and restrictions coming from <a href="https://github.com/travis-ci/travis-build/blob/master/lib/travis/build/script/r.rb">r.rb</a> but able to control the whole CI workflow in a single R file.</p>
</div>
<div id="enhanced-r-package-checking-rcmdcheck-r-cmd-check" class="section level2">
<h2 class="hasAnchor">
<a href="#enhanced-r-package-checking-rcmdcheck-r-cmd-check" class="anchor"></a>Enhanced R package checking: <code>rcmdcheck()</code> &gt; R CMD check</h2>
<p>As a R package developer you are most likely used to call <code><a href="https://www.rdocumentation.org/packages/devtools/topics/check">devtools::check()</a></code> or directly <code>R CMD check</code> on your built package. Usually also Travis will run <code>R CMD check</code> to check the R package. <em>tic</em> instead uses <a href="https://github.com/r-lib/rcmdcheck"><em>rcmdcheck</em></a>, a wrapper around <code>R CMD build</code> and <code>R CMD check</code>. It was developed by <a href="https://github.com/gaborcsardi">Gabor Csardi</a>. <em>rcmdcheck</em> comes with several enhancements:</p>
<ul>
<li>Coloring of important steps, simplifying the readability of the log</li>
<li>Enhanced and extended tracebacks of errors, especially errors in tests</li>
<li>The whole check process is returned in a R object, making it easier to inspect errors/warnings</li>
</ul>
<p>Especially the extended log printing of errors on the CI service is a huge advantage - often enough, CI services cut log output of the console early, omitting important information about the error.</p>
<p>Here is an short excerpt of the improved log output by <em>rcmdcheck</em> including an error message:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">R CMD check ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">─  using log directory ‘<span class="op">/</span>tmp<span class="op">/</span>RtmpM4zdgT<span class="op">/</span>file12d469173dd1<span class="op">/</span>tic.Rcheck’ (581ms)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">─  using R version <span class="dv">3</span>.<span class="fl">5.1</span> (<span class="dv">2018-07-02</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">─  using platform<span class="op">:</span><span class="st"> </span>x86_<span class="dv">64</span><span class="op">-</span>pc<span class="op">-</span>linux<span class="op">-</span><span class="kw">gnu</span> (<span class="dv">64</span><span class="op">-</span>bit)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">─  using session charset<span class="op">:</span><span class="st"> </span>UTF<span class="dv">-8</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">─  using options ‘<span class="op">--</span>no<span class="op">-</span>manual <span class="op">--</span>as<span class="op">-</span>cran’</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">✔  checking <span class="cf">for</span> file ‘tic<span class="op">/</span>DESCRIPTION’</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">─  checking extension type ... Package</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">─  this is package ‘tic’ version ‘<span class="dv">0</span>.<span class="dv">2</span>.<span class="fl">13.9010</span>’</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">─  package encoding<span class="op">:</span><span class="st"> </span>UTF<span class="dv">-8</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">N  checking CRAN incoming <span class="kw">feasibility</span> (<span class="fl">59.7</span>s)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">   Maintainer<span class="op">:</span><span class="st"> </span>‘Kirill Müller <span class="op">&lt;</span>krlmlr<span class="op">+</span>r<span class="op">@</span>mailbox.org<span class="op">&gt;</span>’</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">   </a>
<a class="sourceLine" id="cb1-14" data-line-number="14">   New submission</a>
<a class="sourceLine" id="cb1-15" data-line-number="15">   </a>
<a class="sourceLine" id="cb1-16" data-line-number="16">   Version contains large <span class="kw">components</span> (<span class="dv">0</span>.<span class="dv">2</span>.<span class="fl">13.9010</span>)</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">   </a>
<a class="sourceLine" id="cb1-18" data-line-number="18">   Unknown, possibly mis<span class="op">-</span>spelled, fields <span class="cf">in</span> DESCRIPTION<span class="op">:</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="st">     </span>‘Remotes’</a>
<a class="sourceLine" id="cb1-20" data-line-number="20">   </a>
<a class="sourceLine" id="cb1-21" data-line-number="21">   Suggests or Enhances not <span class="cf">in</span> mainstream repositories<span class="op">:</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="st">     </span>travis</a>
<a class="sourceLine" id="cb1-23" data-line-number="23">   </a>
<a class="sourceLine" id="cb1-24" data-line-number="24">✔  checking package namespace information</a>
<a class="sourceLine" id="cb1-25" data-line-number="25">E  checking package <span class="kw">dependencies</span> (806ms)</a>
<a class="sourceLine" id="cb1-26" data-line-number="26">   Package suggested but not available<span class="op">:</span><span class="st"> </span>‘drat’</a>
<a class="sourceLine" id="cb1-27" data-line-number="27">   </a>
<a class="sourceLine" id="cb1-28" data-line-number="28">   </a>
<a class="sourceLine" id="cb1-29" data-line-number="29">   See</a>
<a class="sourceLine" id="cb1-30" data-line-number="30">     ‘<span class="op">/</span>tmp<span class="op">/</span>RtmpM4zdgT<span class="op">/</span>file12d469173dd1<span class="op">/</span>tic.Rcheck<span class="op">/</span>00check.log’</a>
<a class="sourceLine" id="cb1-31" data-line-number="31">   <span class="cf">for</span> details.</a>
<a class="sourceLine" id="cb1-32" data-line-number="32">   </a>
<a class="sourceLine" id="cb1-33" data-line-number="33">   The suggested packages are required <span class="cf">for</span> a complete check.</a>
<a class="sourceLine" id="cb1-34" data-line-number="34">   Checking can be attempted without them by setting the environment</a>
<a class="sourceLine" id="cb1-35" data-line-number="35">   variable _R_CHECK_FORCE_SUGGESTS_ to a false value.</a>
<a class="sourceLine" id="cb1-36" data-line-number="36">   </a>
<a class="sourceLine" id="cb1-37" data-line-number="37">   See section ‘The DESCRIPTION file’ <span class="cf">in</span> the ‘Writing R Extensions’</a>
<a class="sourceLine" id="cb1-38" data-line-number="38">   manual.</a>
<a class="sourceLine" id="cb1-39" data-line-number="39">── R CMD check results ───────────────────────────────────────────────────────────────────────────────────────────────────────────── tic <span class="dv">0</span>.<span class="dv">2</span>.<span class="fl">13.9010</span> ────</a>
<a class="sourceLine" id="cb1-40" data-line-number="40">Duration<span class="op">:</span><span class="st"> </span>1m <span class="fl">1.3</span>s</a>
<a class="sourceLine" id="cb1-41" data-line-number="41"></a>
<a class="sourceLine" id="cb1-42" data-line-number="42">❯ checking package dependencies ... ERROR</a>
<a class="sourceLine" id="cb1-43" data-line-number="43">  Package suggested but not available<span class="op">:</span><span class="st"> </span>‘drat’</a>
<a class="sourceLine" id="cb1-44" data-line-number="44">  </a>
<a class="sourceLine" id="cb1-45" data-line-number="45">  The suggested packages are required <span class="cf">for</span> a complete check.</a>
<a class="sourceLine" id="cb1-46" data-line-number="46">  Checking can be attempted without them by setting the environment</a>
<a class="sourceLine" id="cb1-47" data-line-number="47">  variable _R_CHECK_FORCE_SUGGESTS_ to a false value.</a>
<a class="sourceLine" id="cb1-48" data-line-number="48">  </a>
<a class="sourceLine" id="cb1-49" data-line-number="49">  See section ‘The DESCRIPTION file’ <span class="cf">in</span> the ‘Writing R Extensions’</a>
<a class="sourceLine" id="cb1-50" data-line-number="50">  manual.</a></code></pre></div>
</div>
<div id="caching-of-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#caching-of-packages" class="anchor"></a>Caching of packages</h2>
<p>When using <em>tic</em>, all dependencies (the ones of the package and also the ones of all stages of the CI build) are installed in the “before_install” stage. This has the advantage that all packages get added to the cache (even if they are just needed for deployment), speeding up subsequent builds substantially.</p>
<p>More information about the whole CI workflow can be found in the <a href="build-lifecycle.html">Build lifecyle</a> vignette.</p>
</div>
<div id="easier-troubleshooting" class="section level2">
<h2 class="hasAnchor">
<a href="#easier-troubleshooting" class="anchor"></a>Easier troubleshooting</h2>
<p><em>tic</em> comes with the ability to <a href="advanced.html#emulate-a-ci-run-locally">emulate a CI run locally</a> and <a href="advanced#troubleshooting-running-tic-locally">debug problems in the config file</a> <code>tic.R</code> by calling <code><a href="../reference/dsl_get.html">dsl_load()</a></code> locally.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#easier-deployment">Easier deployment</a></li>
      <li><a href="#support-for-various-r-projects">Support for various R projects</a></li>
      <li><a href="#ci-agnostic-workflows">CI-Agnostic workflows</a></li>
      <li><a href="#less-dependency-on-external-ci-control-commands">Less dependency on external CI control commands</a></li>
      <li><a href="#enhanced-r-package-checking-rcmdcheck-r-cmd-check">Enhanced R package checking: <code>rcmdcheck()</code> &gt; R CMD check</a></li>
      <li><a href="#caching-of-packages">Caching of packages</a></li>
      <li><a href="#easier-troubleshooting">Easier troubleshooting</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div style="margin-top:-9px">
  <p>tic is a part of <img src="https://github.com/ropensci/logos/raw/master/icon_lettering_color.png" height="40" alt="rOpenSci">. Learn more at <a href="https://ropensci.org">ropensci.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href="http://krlmlr.info">Kirill Müller</a>, Mika Braginsky, Karthik Ram, Jeroen Ooms, Patrick Schratz, rOpenSci.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a> &amp; <a href="https://ropensci.github.io/rotemplate/">rotemplate</a>.
  </p>
</div>
      </footer>
</div>

  

  </body>
</html>
