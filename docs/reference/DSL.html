<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>tic's domain-specific language — DSL • tic</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="tic's domain-specific language — DSL" />

<meta property="og:description" content="Functions to define stages and their constitutent
steps.
get_stage() returns a Stage object for a stage given by name.
This function only works when called by load_from_file().
add_step() adds a step to a stage, see step_hello_world()
and the links therein for available steps.
add_code_step() is a shortcut for add_step(step_run_code(...)).
do_package_checks() adds default steps related to package checks
to the &quot;before_install&quot;, &quot;install&quot;, &quot;script&quot; and &quot;after_success&quot;
stages:

step_install_deps() in the &quot;install&quot; stage, using the
repos argument.
step_rcmdcheck() in the &quot;script&quot; stage, using the
warnings_are_errors, notes_are_errors, args, and
build_args arguments.
A call to covr::codecov() in the &quot;after_success&quot; stage (only if the codecov flag is set)
" />

<meta property="og:description" content="do_pkgdown() builds and optionally deploys a pkgdown site and adds default steps
to the &quot;install&quot;, &quot;before_deploy&quot; and &quot;deploy&quot; stages:

step_install_deps() in the &quot;install&quot; stage, using the
repos argument.
step_setup_ssh() in the &quot;before_deploy&quot; to setup the upcoming deployment.
step_setup_push_deploy() in the &quot;before_deploy&quot; stage.
step_build_pkgdown() in the &quot;deploy&quot; stage
step_do_push_deploy() in the &quot;deploy&quot; stage. By default, the deploy is done to the gh-pages branch.
" />

<meta property="og:description" content="do_bookdown() adds default steps related to package checks
to the &quot;install&quot;, &quot;before_deploy&quot;, &quot;script&quot; and &quot;deploy&quot; stages.

A step_install_deps() in the &quot;install&quot; stage, using the
repos argument.
step_setup_ssh() in the &quot;before_deploy&quot; to setup the upcoming deployment.
step_setup_push_deploy() in the &quot;before_deploy&quot; stage.
step_build_bookdown() in the &quot;deploy&quot; stage
step_do_push_deploy() in the &quot;deploy&quot; stage. By default, the deploy is done to the gh-pages branch.
" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.13.9012</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/advantages.html">Why you should use tic</a>
    </li>
    <li>
      <a href="../articles/build-lifecycle.html">The CI build lifecycle</a>
    </li>
    <li>
      <a href="../articles/tic-usethis-travis.html">tic, travis and usethis</a>
    </li>
    <li>
      <a href="../articles/advanced.html">Advanced usage</a>
    </li>
    <li>
      <a href="../articles/deployment.html">Deployment</a>
    </li>
    <li>
      <a href="../articles/custom-steps.html">Custom steps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropenscilabs/tic">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>tic's domain-specific language</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropenscilabs/tic/blob/master/R/dsl.R'><code>R/dsl.R</code></a></small>
    <div class="hidden name"><code>DSL.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Functions to define stages and their constitutent
steps.</p>
<p><code>get_stage()</code> returns a Stage object for a stage given by name.
This function only works when called by <code><a href='load_from_file.html'>load_from_file()</a></code>.</p>
<p><code>add_step()</code> adds a step to a stage, see <code><a href='step_hello_world.html'>step_hello_world()</a></code>
and the links therein for available steps.</p>
<p><code>add_code_step()</code> is a shortcut for <code>add_step(step_run_code(...))</code>.</p>
<p><code>do_package_checks()</code> adds default steps related to package checks
to the <code>"before_install"</code>, <code>"install"</code>, <code>"script"</code> and <code>"after_success"</code>
stages:</p>
<ol>
<li><p><code><a href='step_install_pkg.html'>step_install_deps()</a></code> in the <code>"install"</code> stage, using the
<code>repos</code> argument.</p></li>
<li><p><code><a href='step_rcmdcheck.html'>step_rcmdcheck()</a></code> in the <code>"script"</code> stage, using the
<code>warnings_are_errors</code>, <code>notes_are_errors</code>, <code>args</code>, and
<code>build_args</code> arguments.</p></li>
<li><p>A call to <code><a href='https://www.rdocumentation.org/packages/covr/topics/codecov'>covr::codecov()</a></code> in the <code>"after_success"</code> stage (only if the <code>codecov</code> flag is set)</p></li>
</ol>

    <p><code>do_pkgdown()</code> builds and optionally deploys a pkgdown site and adds default steps
to the <code>"install"</code>, <code>"before_deploy"</code> and <code>"deploy"</code> stages:</p>
<ol>
<li><p><code><a href='step_install_pkg.html'>step_install_deps()</a></code> in the <code>"install"</code> stage, using the
<code>repos</code> argument.</p></li>
<li><p><code><a href='step_setup_ssh.html'>step_setup_ssh()</a></code> in the <code>"before_deploy"</code> to setup the upcoming deployment.</p></li>
<li><p><code><a href='step_setup_push_deploy.html'>step_setup_push_deploy()</a></code> in the <code>"before_deploy"</code> stage.</p></li>
<li><p><code><a href='step_build_pkgdown.html'>step_build_pkgdown()</a></code> in the <code>"deploy"</code> stage</p></li>
<li><p><code><a href='step_do_push_deploy.html'>step_do_push_deploy()</a></code> in the <code>"deploy"</code> stage. By default, the deploy is done to the gh-pages branch.</p></li>
</ol>

    <p><code>do_bookdown()</code> adds default steps related to package checks
to the <code>"install"</code>, <code>"before_deploy"</code>, <code>"script"</code> and <code>"deploy"</code> stages.</p>
<ol>
<li><p>A <code><a href='step_install_pkg.html'>step_install_deps()</a></code> in the <code>"install"</code> stage, using the
<code>repos</code> argument.</p></li>
<li><p><code><a href='step_setup_ssh.html'>step_setup_ssh()</a></code> in the <code>"before_deploy"</code> to setup the upcoming deployment.</p></li>
<li><p><code><a href='step_setup_push_deploy.html'>step_setup_push_deploy()</a></code> in the <code>"before_deploy"</code> stage.</p></li>
<li><p><code><a href='step_build_bookdown.html'>step_build_bookdown()</a></code> in the <code>"deploy"</code> stage</p></li>
<li><p><code><a href='step_do_push_deploy.html'>step_do_push_deploy()</a></code> in the <code>"deploy"</code> stage. By default, the deploy is done to the gh-pages branch.</p></li>
</ol>
    
    </div>

    <pre class="usage"><span class='fu'>get_stage</span>(<span class='no'>name</span>)

<span class='fu'>add_step</span>(<span class='no'>stage</span>, <span class='no'>step</span>)

<span class='fu'>add_code_step</span>(<span class='no'>stage</span>, <span class='kw'>call</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>prepare_call</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>do_package_checks</span>(<span class='no'>...</span>, <span class='kw'>codecov</span> <span class='kw'>=</span> !<span class='fu'><a href='ci.html'>ci_is_interactive</a></span>(),
  <span class='kw'>warnings_are_errors</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>notes_are_errors</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"--no-manual"</span>, <span class='st'>"--as-cran"</span>), <span class='kw'>build_args</span> <span class='kw'>=</span> <span class='st'>"--force"</span>,
  <span class='kw'>error_on</span> <span class='kw'>=</span> <span class='st'>"warning"</span>, <span class='kw'>repos</span> <span class='kw'>=</span> <span class='fu'><a href='repo.html'>repo_default</a></span>(), <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>Inf</span>)

<span class='fu'>do_pkgdown</span>(<span class='no'>...</span>, <span class='kw'>build_only</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>orphan</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>checkout</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>repos</span> <span class='kw'>=</span> <span class='fu'><a href='repo.html'>repo_default</a></span>(), <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"."</span>, <span class='kw'>branch</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>remote_url</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>commit_message</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>commit_paths</span> <span class='kw'>=</span> <span class='st'>"."</span>)

<span class='fu'>do_bookdown</span>(<span class='no'>...</span>, <span class='kw'>build_only</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>orphan</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>checkout</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>repos</span> <span class='kw'>=</span> <span class='fu'><a href='repo.html'>repo_default</a></span>(), <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"_book"</span>, <span class='kw'>branch</span> <span class='kw'>=</span> <span class='st'>"gh-pages"</span>,
  <span class='kw'>remote_url</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>commit_message</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>commit_paths</span> <span class='kw'>=</span> <span class='st'>"."</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p><code>[string]</code><br />
The name for the stage.</p></td>
    </tr>
    <tr>
      <th>stage</th>
      <td><p><code>[Stage]</code><br />
A Stage object as returned by <code>get_stage()</code>.</p></td>
    </tr>
    <tr>
      <th>step</th>
      <td><p><code>[function]</code><br />
An object of class <a href='TicStep.html'>TicStep</a>, usually created by functions
with the <code>step_</code> prefix like <code><a href='step_hello_world.html'>step_hello_world()</a></code>.</p></td>
    </tr>
    <tr>
      <th>call</th>
      <td><p><code>[call]</code><br />
An arbitrary R expression executed during the stage to which this step is
added.
The default is useful if you only pass <code>prepare_call</code>.</p></td>
    </tr>
    <tr>
      <th>prepare_call</th>
      <td><p><code>[call]</code><br />
An optional arbitrary R expression executed during preparation.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Ignored, used to enforce naming of arguments.</p></td>
    </tr>
    <tr>
      <th>codecov</th>
      <td><p><code>[flag]</code><br /> Whether to include a step running
<code><a href='https://www.rdocumentation.org/packages/covr/topics/codecov'>covr::codecov(quiet = FALSE)</a></code> (default: only for non-interactive CI,
see <code><a href='ci.html'>ci_is_interactive()</a></code>).</p></td>
    </tr>
    <tr>
      <th>warnings_are_errors</th>
      <td><p><code>[flag]</code><br />
Deprecated, use <code>error_on</code>.</p></td>
    </tr>
    <tr>
      <th>notes_are_errors</th>
      <td><p><code>[flag]</code><br />
Deprecated, use <code>error_on</code>.</p></td>
    </tr>
    <tr>
      <th>args</th>
      <td><p><code>[character]</code><br />
Passed to <code><a href='https://www.rdocumentation.org/packages/rcmdcheck/topics/rcmdcheck'>rcmdcheck::rcmdcheck()</a></code>, default:
<code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c("--no-manual", "--as-cran")</a></code>.</p></td>
    </tr>
    <tr>
      <th>build_args</th>
      <td><p><code>[character]</code><br />
Passed to <code><a href='https://www.rdocumentation.org/packages/rcmdcheck/topics/rcmdcheck'>rcmdcheck::rcmdcheck()</a></code>, default:
<code>"--force"</code>.</p></td>
    </tr>
    <tr>
      <th>error_on</th>
      <td><p><code>[character]</code><br />
Whether to throw an error on R CMD check failures. Note that the check is
always completed (unless a timeout happens), and the error is only thrown
after completion. If "never", then no errors are thrown. If "error", then
only ERROR failures generate errors. If "warning", then WARNING failures
generate errors as well. If "note", then any check failure generated an
error.</p></td>
    </tr>
    <tr>
      <th>repos</th>
      <td><p><code>[character]</code><br />
Passed to <code><a href='https://www.rdocumentation.org/packages/rcmdcheck/topics/rcmdcheck'>rcmdcheck::rcmdcheck()</a></code>, default:
<code><a href='repo.html'>repo_default()</a></code>.</p></td>
    </tr>
    <tr>
      <th>timeout</th>
      <td><p><code>[numeric]</code><br />
Passed to <code><a href='https://www.rdocumentation.org/packages/rcmdcheck/topics/rcmdcheck'>rcmdcheck::rcmdcheck()</a></code>, default:
<code>Inf</code>.</p></td>
    </tr>
    <tr>
      <th>build_only</th>
      <td><p><code>[flag]</code><br /> Build the pkgdown site but do not deploy it. Removes step
<code><a href='step_setup_ssh.html'>step_setup_ssh()</a></code>, <code><a href='step_setup_push_deploy.html'>step_setup_push_deploy()</a></code> and <code><a href='step_do_push_deploy.html'>step_do_push_deploy()</a></code>
from macro <code>do_pkgdown</code>.</p></td>
    </tr>
    <tr>
      <th>orphan</th>
      <td><p><code>[flag]</code><br />
Create and force-push an orphan branch consisting of only one commit?
This can be useful e.g. for <code>path = "docs", branch = "gh-pages"</code>,
but cannot be applied for pushing to the current branch.</p></td>
    </tr>
    <tr>
      <th>checkout</th>
      <td><p><code>[flag]</code><br />
Check out the current contents of the repository? Defaults to <code>TRUE</code>,
set to <code>FALSE</code> if the build process relies on existing contents or
if you deploy to a different branch.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p><code>[string]</code><br />
Path to the repository, default <code>"."</code> which means setting up the current
repository.</p></td>
    </tr>
    <tr>
      <th>branch</th>
      <td><p><code>[string]</code><br />
Target branch, default: current branch.</p></td>
    </tr>
    <tr>
      <th>remote_url</th>
      <td><p><code>[string]</code><br />
The URL of the remote Git repository to push to, defaults to the
current GitHub repository.</p></td>
    </tr>
    <tr>
      <th>commit_message</th>
      <td><p><code>[string]</code><br />
Commit message to use, defaults to a useful message linking to the CI build
and avoiding recursive CI runs.</p></td>
    </tr>
    <tr>
      <th>commit_paths</th>
      <td><p><code>[character]</code><br />
Restrict the set of directories and/or files added to Git before deploying.
Default: deploy all files.</p></td>
    </tr>
    </table>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
                </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kirill Müller, Mika Braginsky, Karthik Ram, Jeroen Ooms, Patrick Schratz, rOpenSci.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

